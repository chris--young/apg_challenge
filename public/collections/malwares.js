/**
 * /public/collections/malwares.js
 *
 * @descrpition: Malwares collection
 * @author: Chris Young (young.c.5690@gmail.com)
 * @created: September 17th 2015
 */

var Malware = require('../models/malware.js');

module.exports = Backbone.Collection.extend({

  model: Malware,

  url: 'malwares',

  /**
   * Malwares.amountOfTypes()
   * @description: Determines the amount of each classification type
   * @returns: {Array}
   */
  amountOfTypes: function () {
    var classificationTypes = [];

    _.each(this.models, function (malware) {
      var classificationType = _.findWhere(classificationTypes, { classificationType: malware.get('classificationType') });

      if (classificationType)
        classificationType.malwares.push(malware);
      else
        classificationTypes.push({
          classificationType: malware.get('classificationType'),
          malwares: [malware]
        });
    });

    return classificationTypes;
  }

});

